<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Rede de Catadores do Estado do Ceará</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="icon" href="logo.png" />
    <meta
      name="description"
      content="Rede de Catadores(as) de Materiais Recicláveis do Estado do Ceará — reciclagem, inclusão socioeconômica e educação ambiental."
    />

    <!-- Efeito de clique (ripple) e foco acessível -->
    <style>
      .clickable-card {
        position: relative;
        overflow: hidden;
        outline: none;
      }
      .clickable-card::after {
        content: "";
        position: absolute;
        width: 300px;
        height: 300px;
        transform: translate(-50%, -50%);
        top: var(--y, 50%);
        left: var(--x, 50%);
        background: radial-gradient(
          closest-side,
          rgba(16, 185, 129, 0.25),
          rgba(16, 185, 129, 0.18),
          transparent 70%
        );
        opacity: 0;
        transition: opacity 0.35s ease;
        pointer-events: none;
        border-radius: 9999px;
      }
      .clickable-card.is-pressed::after {
        opacity: 1;
        transition: opacity 0.15s ease;
      }
      /* foco visível extra para acessibilidade, além do ring do Tailwind */
      .clickable-card:focus-visible {
        box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.35);
        border-color: rgba(16, 185, 129, 0.55);
      }
    </style>
  </head>

  <body class="bg-green-50 text-gray-800">
    <!-- NAVBAR -->
    <header class="bg-green-700 text-white shadow-md sticky top-0 z-50">
      <nav class="max-w-7xl mx-auto flex justify-between items-center p-4">
        <div class="flex items-center gap-2">
          <img src="logo.png" alt="Logo" class="w-9 h-9 rounded-md" />
          <h1 class="font-bold text-lg sm:text-xl leading-tight">
            Rede de Catadores do Estado do Ceará
          </h1>
        </div>
        <ul class="flex gap-4 sm:gap-6 font-medium">
          <li><a href="#sobre" class="hover:text-yellow-300">Sobre</a></li>
          <li>
            <a href="#projetos" class="hover:text-yellow-300">Iniciativas</a>
          </li>
          <li><a href="#rede" class="hover:text-yellow-300">Nossa Rede</a></li>
          <li><a href="#contato" class="hover:text-yellow-300">Contato</a></li>
          <li>
            <button
              id="btnAfiliados"
              class="bg-white/10 hover:bg-white/20 border border-white/20 rounded-full px-3 py-1"
            >
              Afiliados
            </button>
          </li>
          <li>
            <button id="btnLogin" class="hover:text-yellow-300">Login</button>
          </li>
        </ul>
      </nav>
    </header>

    <!-- HERO -->
    <section class="bg-gradient-to-br from-green-800 to-green-600 text-white">
      <div
        class="max-w-7xl mx-auto grid md:grid-cols-2 gap-10 items-center py-16 sm:py-20 px-6"
      >
        <div class="text-center md:text-left">
          <h2 class="text-4xl md:text-5xl font-extrabold mb-4 leading-tight">
            Transformando resíduos em renda e dignidade ♻
          </h2>
          <p class="text-lg md:text-xl mb-6 max-w-xl mx-auto md:mx-0">
            Catadores e catadoras organizados em prol da coleta seletiva,
            inclusão socioeconômica e preservação ambiental em todo o Ceará.
          </p>
          <div class="flex gap-3 justify-center md:justify-start">
            <a
              href="#projetos"
              class="inline-block bg-yellow-400 hover:bg-yellow-300 text-green-900 font-semibold px-6 py-3 rounded-full transition"
            >
              Conheça nossas iniciativas
            </a>
            <a
              href="#contato"
              class="inline-block bg-white/10 hover:bg-white/20 border border-white/30 font-semibold px-6 py-3 rounded-full transition"
            >
              Seja parceiro(a)
            </a>
          </div>
        </div>
        <div class="flex justify-center md:justify-end">
          <img
            src="logo.png"
            alt="Logo Rede de Catadores"
            class="w-[320px] h-[320px] sm:w-[360px] sm:h-[360px] drop-shadow-2xl rounded-xl"
          />
        </div>
      </div>
    </section>

    <!-- SOBRE -->
    <section id="sobre" class="max-w-7xl mx-auto py-16 px-6">
      <div class="grid lg:grid-cols-2 gap-10 items-center">
        <div>
          <h3 class="text-3xl font-bold text-green-800 mb-4">Quem Somos</h3>
          <p class="mb-4 text-lg leading-relaxed">
            A Rede de Catadores(as) de Materiais Recicláveis do Estado do Ceará
            iniciou sua articulação no início dos anos 2000 e se formalizou em
            2007, participando de eventos e espaços de mobilização social
            ligados ao meio ambiente e à reciclagem. Com o respaldo da
            <strong>Lei 12.305/2010</strong>, qualificou-se para atuar como
            co-gestora do gerenciamento de resíduos.
          </p>
          <p class="text-lg leading-relaxed">
            Hoje, a rede representa <strong>17 organizações</strong> em
            Fortaleza e diversas filiações no interior. Defendemos políticas
            públicas para infraestrutura, EPIs, logística, qualificação e
            inclusão socioeconômica na coleta seletiva.
          </p>
          <div class="mt-6 grid sm:grid-cols-2 gap-3">
            <div class="rounded-2xl border border-green-100 bg-green-50 p-4">
              <div class="text-sm text-green-700">Coordenação Geral</div>
              <div class="font-semibold">
                Leina Mara Rodrigues da Silva Duarte
              </div>
            </div>
            <div class="rounded-2xl border border-green-100 bg-green-50 p-4">
              <div class="text-sm text-green-700">CNPJ</div>
              <div class="font-semibold">09.000.185/0001-09</div>
            </div>
            <div class="rounded-2xl border border-green-100 bg-green-50 p-4">
              <div class="text-sm text-green-700">Sede</div>
              <div class="font-semibold">
                Rua Valdemar Holanda, 474 — João XXIII, Fortaleza/CE
              </div>
            </div>
            <div class="rounded-2xl border border-green-100 bg-green-50 p-4">
              <div class="text-sm text-green-700">E-mail</div>
              <div class="font-semibold break-all">
                redeestadual.catadores@gmail.com
              </div>
            </div>
          </div>
        </div>
        <div
          class="rounded-2xl shadow-lg overflow-hidden border border-green-100 bg-white"
        >
          <img
            src="foto5.jpg"
            alt="Equipe de reciclagem"
            class="w-full h-64 object-cover"
          />
          <div class="p-6">
            <h4 class="text-xl font-semibold text-green-700 mb-2">
              Programa Auxílio Catador
            </h4>
            <p class="text-gray-700">
              Em parceria com a SEMA desde 2019, o programa repassa apoio
              financeiro aos catadores(as) associados, estimulando a coleta
              seletiva e fortalecendo o associativismo.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- INICIATIVAS -->
    <section id="projetos" class="bg-green-100 py-16 px-6">
      <div class="max-w-7xl mx-auto">
        <h3 class="text-3xl font-bold text-center text-green-800 mb-10">
          Nossas Iniciativas
        </h3>
        <div class="grid md:grid-cols-3 gap-6">
          <div
            class="bg-white rounded-2xl shadow-md p-6 border border-green-100"
          >
            <img
              src="foto1.png"
              alt="Fachada do galpão"
              class="rounded-xl mb-4 w-full h-48 object-cover"
              loading="lazy"
            />
            <h4 class="text-xl font-semibold mb-2 text-green-700">
              Coleta Seletiva com Inclusão
            </h4>
            <p class="text-gray-700">
              Estruturas, rotas e parcerias com participação direta dos
              catadores(as).
            </p>
          </div>
          <div
            class="bg-white rounded-2xl shadow-md p-6 border border-green-100"
          >
            <img
              src="foto4.png"
              alt="Oficina"
              class="rounded-xl mb-4 w-full h-48 object-cover"
              loading="lazy"
            />
            <h4 class="text-xl font-semibold mb-2 text-green-700">
              Educação & Oficinas
            </h4>
            <p class="text-gray-700">
              Formações em reciclagem, segurança do trabalho, gestão e economia
              solidária.
            </p>
          </div>
          <div
            class="bg-white rounded-2xl shadow-md p-6 border border-green-100"
          >
            <img
              src="foto2.png"
              alt="Triagem"
              class="rounded-xl mb-4 w-full h-48 object-cover"
              loading="lazy"
            />
            <h4 class="text-xl font-semibold mb-2 text-green-700">
              Beneficiamento & Artesanato
            </h4>
            <p class="text-gray-700">
              Do beneficiamento ao reuso criativo: renda e valorização dos
              materiais.
            </p>
          </div>
        </div>

        <div class="mt-10 grid sm:grid-cols-3 gap-4">
          <div
            class="rounded-2xl bg-white p-5 border border-green-100 text-center"
          >
            <div class="text-sm text-green-700">Organizações em Fortaleza</div>
            <div class="text-3xl font-bold mt-1">17</div>
          </div>
          <div
            class="rounded-2xl bg-white p-5 border border-green-100 text-center"
          >
            <div class="text-sm text-green-700">
              Toneladas/ano (amostra 2024)
            </div>
            <div class="text-3xl font-bold mt-1">436.992,7 kg</div>
          </div>
          <div
            class="rounded-2xl bg-white p-5 border border-green-100 text-center"
          >
            <div class="text-sm text-green-700">Municípios com filiações</div>
            <div class="text-3xl font-bold mt-1">20+</div>
          </div>
        </div>
      </div>
    </section>

    <!-- NOSSA REDE -->
    <section id="rede" class="max-w-7xl mx-auto py-16 px-6">
      <div class="grid lg:grid-cols-2 gap-8">
        <div>
          <h3 class="text-3xl font-bold text-green-800 mb-4">
            Nossa Rede em Fortaleza
          </h3>
          <p class="text-lg mb-6">
            Associações filiadas (nome, CNPJ e bairro):
          </p>

          <div class="grid sm:grid-cols-2 gap-4">
            <div class="rounded-xl border bg-white p-4">
              <div class="font-semibold">Rede de Catadores</div>
              <div class="text-sm text-gray-600">
                09.000.185/0001-09 — João XXIII
              </div>
            </div>
            <div class="rounded-xl border bg-white p-4">
              <div class="font-semibold">
                ACORES (Associação Ecológica dos Coletores de Materiais
                Recicláveis da Serrinha e Adjacências)
              </div>
              <div class="text-sm text-gray-600">
                04.989.221/0001-95 — Serrinha
              </div>
            </div>
            <div class="rounded-xl border bg-white p-4">
              <div class="font-semibold">
                ARAN (Associação de Recicladores Amigos da Natureza)
              </div>
              <div class="text-sm text-gray-600">
                07.475.187/0001-29 — Bonsucesso
              </div>
            </div>
            <div class="rounded-xl border bg-white p-4">
              <div class="font-semibold">
                ASCAJAN (Associação dos Catadores do Jangurussu)
              </div>
              <div class="text-sm text-gray-600">
                08.612.882/0001-58 — Jangurussu
              </div>
            </div>
            <div class="rounded-xl border bg-white p-4">
              <div class="font-semibold">Moura Brasil</div>
              <div class="text-sm text-gray-600">
                24.293.438/0001-73 — Moura Brasil
              </div>
            </div>
            <div class="rounded-xl border bg-white p-4">
              <div class="font-semibold">Maravilha</div>
              <div class="text-sm text-gray-600">
                11.058.865/0001-25 — Vila União
              </div>
            </div>
            <div class="rounded-xl border bg-white p-4">
              <div class="font-semibold">Raio de Sol</div>
              <div class="text-sm text-gray-600">
                23.668.402/0001-64 — Genibaú
              </div>
            </div>
            <div class="rounded-xl border bg-white p-4">
              <div class="font-semibold">Rosa Virgínia</div>
              <div class="text-sm text-gray-600">
                09.635.604/0001-89 — Santa Terezinha
              </div>
            </div>
            <div class="rounded-xl border bg-white p-4">
              <div class="font-semibold">
                SOCRELP (Sociedade Comunitária de Reciclagem de Lixo do Pirambu)
              </div>
              <div class="text-sm text-gray-600">
                00.118.784/0001-57 — Pirambu
              </div>
            </div>
            <div class="rounded-xl border bg-white p-4">
              <div class="font-semibold">Viva a Vida</div>
              <div class="text-sm text-gray-600">
                07.865.301/0001-27 — Farias Brito
              </div>
            </div>
          </div>

          <button
            id="btnVerAfiliados"
            class="mt-4 inline-flex items-center gap-2 rounded-full border px-4 py-2 bg-white hover:bg-neutral-50"
          >
            Ver todos os afiliados <span aria-hidden>→</span>
          </button>
        </div>

        <div class="rounded-2xl border bg-white p-6">
          <h4 class="text-xl font-semibold text-green-700 mb-2">
            Produção (amostra 2024)
          </h4>
          <p class="text-gray-700 mb-4">
            Registros mensais da <strong>Rede</strong>, totalizando
            <strong>436.992,7 kg</strong>.
          </p>
          <div class="overflow-hidden rounded-xl border">
            <table id="tabelaProducao" class="min-w-full text-sm">
              <thead class="bg-neutral-50 text-left">
                <tr>
                  <th class="px-4 py-2 font-medium text-neutral-700">Mês</th>
                  <th class="px-4 py-2 font-medium text-neutral-700">Kg</th>
                </tr>
              </thead>
              <tbody>
                <tr class="odd:bg-white even:bg-neutral-50">
                  <td class="px-4 py-2">Jan</td>
                  <td class="px-4 py-2">37.655,0</td>
                </tr>
                <tr class="odd:bg-white even:bg-neutral-50">
                  <td class="px-4 py-2">Fev</td>
                  <td class="px-4 py-2">32.626,5</td>
                </tr>
                <tr class="odd:bg-white even:bg-neutral-50">
                  <td class="px-4 py-2">Mar</td>
                  <td class="px-4 py-2">26.805,9</td>
                </tr>
                <tr class="odd:bg-white even:bg-neutral-50">
                  <td class="px-4 py-2">Abr</td>
                  <td class="px-4 py-2">35.855,0</td>
                </tr>
                <tr class="odd:bg-white even:bg-neutral-50">
                  <td class="px-4 py-2">Mai</td>
                  <td class="px-4 py-2">38.118,0</td>
                </tr>
                <tr class="odd:bg-white even:bg-neutral-50">
                  <td class="px-4 py-2">Jun</td>
                  <td class="px-4 py-2">36.184,5</td>
                </tr>
                <tr class="odd:bg-white even:bg-neutral-50">
                  <td class="px-4 py-2">Jul</td>
                  <td class="px-4 py-2">49.744,0</td>
                </tr>
                <tr class="odd:bg-white even:bg-neutral-50">
                  <td class="px-4 py-2">Ago</td>
                  <td class="px-4 py-2">39.233,5</td>
                </tr>
                <tr class="odd:bg-white even:bg-neutral-50">
                  <td class="px-4 py-2">Set</td>
                  <td class="px-4 py-2">36.517,0</td>
                </tr>
                <tr class="odd:bg-white even:bg-neutral-50">
                  <td class="px-4 py-2">Out</td>
                  <td class="px-4 py-2">41.127,5</td>
                </tr>
                <tr class="odd:bg-white even:bg-neutral-50">
                  <td class="px-4 py-2">Nov</td>
                  <td class="px-4 py-2">30.212,5</td>
                </tr>
                <tr class="odd:bg-white even:bg-neutral-50">
                  <td class="px-4 py-2">Dez</td>
                  <td class="px-4 py-2">32.913,3</td>
                </tr>
                <tr class="bg-green-50 font-semibold">
                  <td class="px-4 py-2">Total</td>
                  <td class="px-4 py-2">436.992,7</td>
                </tr>
              </tbody>
            </table>
          </div>

          <div class="mt-6">
            <h5 class="text-sm text-green-700 font-medium mb-2">
              Rede de Catadores - Produção mensal (kg)
            </h5>
            <canvas
              id="graficoMensal"
              height="140"
              aria-label="Gráfico de barras da produção mensal"
            ></canvas>
          </div>
          <p class="text-xs text-neutral-500 mt-3">
            *O gráfico lê automaticamente os valores (kg) da tabela acima.
          </p>
        </div>
      </div>
    </section>

    <!-- CONTATO -->
    <section id="contato" class="max-w-4xl mx-auto py-16 px-6 text-center">
      <h3 class="text-3xl font-bold text-green-800 mb-3">Entre em Contato</h3>
      <p class="text-lg mb-6">
        Parcerias, doações e projetos: fale com a gente.
      </p>
      <form
        class="space-y-4 max-w-md mx-auto"
        onsubmit="event.preventDefault(); alert('Mensagem enviada! Obrigado pelo contato.');"
      >
        <input
          type="text"
          placeholder="Seu nome"
          class="w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-green-600"
          required
        />
        <input
          type="email"
          placeholder="Seu e-mail"
          class="w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-green-600"
          required
        />
        <textarea
          placeholder="Sua mensagem"
          rows="4"
          class="w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-green-600"
          required
        ></textarea>
        <button
          type="submit"
          class="bg-green-700 text-white font-semibold px-6 py-3 rounded-lg hover:bg-green-800 transition"
        >
          Enviar Mensagem
        </button>
      </form>
      <div class="mt-6 text-sm text-neutral-600">
        ou envie um e-mail:
        <a
          class="underline hover:text-green-700"
          href="mailto:redeestadual.catadores@gmail.com"
          >redeestadual.catadores@gmail.com</a
        >
      </div>
    </section>

    <!-- FOOTER -->
    <footer class="bg-green-700 text-white py-8">
      <div class="max-w-7xl mx-auto px-6 grid md:grid-cols-4 gap-6 text-sm">
        <div>
          <div class="font-semibold">Rede de Catadores do Estado do Ceará</div>
          <div>CNPJ: 09.000.185/0001-09</div>
        </div>

        <div>
          <div class="font-semibold">Endereço</div>
          <div>Rua Valdemar Holanda, 474 — João XXIII, Fortaleza/CE</div>
        </div>

        <div>
          <div class="font-semibold">Educação Ambiental</div>
        </div>

        <div>
          <div class="font-semibold">Redes & Contato</div>

          <!-- Linha 1 -->
          <div class="mt-2 flex items-center gap-3" aria-label="Redes sociais">
            <!-- Instagram -->
            <a
              href="https://www.instagram.com/redecatadoresce"
              target="_blank"
              rel="noopener"
              aria-label="Instagram"
              title="Abrir Instagram"
              class="group relative inline-flex w-10 h-10 rounded-full border border-white/30 items-center justify-center cursor-pointer transition-all duration-150 ease-out hover:-translate-y-0.5 hover:bg-white/10 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white/70 focus-visible:ring-offset-2 focus-visible:ring-offset-green-700 active:scale-95"
            >
              <span
                class="pointer-events-none absolute inset-0 rounded-full opacity-0 group-active:opacity-30 group-active:animate-ping bg-white/40"
              ></span>
              <svg
                viewBox="0 0 24 24"
                class="w-5 h-5 transition-transform group-hover:scale-110"
                fill="currentColor"
                aria-hidden="true"
              >
                <path
                  d="M7 2h10a5 5 0 015 5v10a5 5 0 01-5 5H7a5 5 0 01-5-5V7a5 5 0 015-5zm10 2H7a3 3 0 00-3 3v10a3 3 0 003 3h10a3 3 0 003-3V7a3 3 0 00-3-3zm-5 3a5 5 0 110 10 5 5 0 010-10zm0 2.2a2.8 2.8 0 100 5.6 2.8 2.8 0 000-5.6zM17.5 6.8a1.25 1.25 0 110 2.5 1.25 1.25 0 010-2.5z"
                />
              </svg>
            </a>

            <!-- YouTube -->
            <a
              href="https://www.youtube.com/@cicerocatador.74"
              target="_blank"
              rel="noopener"
              aria-label="YouTube"
              title="Abrir YouTube"
              class="group relative inline-flex w-10 h-10 rounded-full border border-white/30 items-center justify-center cursor-pointer transition-all duration-150 ease-out hover:-translate-y-0.5 hover:bg-white/10 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white/70 focus-visible:ring-offset-2 focus-visible:ring-offset-green-700 active:scale-95"
            >
              <span
                class="pointer-events-none absolute inset-0 rounded-full opacity-0 group-active:opacity-30 group-active:animate-ping bg-white/40"
              ></span>
              <svg
                viewBox="0 0 24 24"
                class="w-5 h-5 transition-transform group-hover:scale-110"
                fill="currentColor"
                aria-hidden="true"
              >
                <path
                  d="M23.5 6.2a3 3 0 00-2.1-2.1C19.5 3.5 12 3.5 12 3.5s-7.5 0-9.4.6A3 3 0 00.5 6.2C0 8.1 0 12 0 12s0 3.9.5 5.8a3 3 0 002.1 2.1c1.9.6 9.4.6 9.4.6s7.5 0 9.4-.6a3 3 0 002.1-2.1c.5-1.9.5-5.8.5-5.8s0-3.9-.5-5.8zM9.6 15.5v-7L15.8 12 9.6 15.5z"
                />
              </svg>
            </a>
          </div>

          <!-- Linha 2 -->
          <div class="mt-3 flex items-center gap-3">
            <!-- WhatsApp -->
            <a
              href="https://wa.me/5585991192037"
              target="_blank"
              rel="noopener"
              aria-label="WhatsApp"
              title="Chamar no WhatsApp"
              class="group relative inline-flex w-10 h-10 rounded-full border border-white/30 items-center justify-center cursor-pointer transition-all duration-150 ease-out hover:-translate-y-0.5 hover:bg-white/10 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white/70 focus-visible:ring-offset-2 focus-visible:ring-offset-green-700 active:scale-95"
            >
              <span
                class="pointer-events-none absolute inset-0 rounded-full opacity-0 group-active:opacity-30 group-active:animate-ping bg-white/40"
              ></span>
              <svg
                viewBox="0 0 24 24"
                class="w-5 h-5 transition-transform group-hover:scale-110"
                fill="currentColor"
                aria-hidden="true"
              >
                <path
                  d="M12.04 2a9.9 9.9 0 00-8.5 14.9L2 22l5.2-1.5A9.9 9.9 0 1012.04 2zm0 2a7.9 7.9 0 110 15.8 7.8 7.8 0 01-4.2-1.2l-.3-.2-3 .9.9-3-.2-.3A7.8 7.8 0 0112.04 4zm4.7 9.5c-.2-.1-1.2-.6-1.4-.6s-.3 0-.5.2l-.5.6c-.1.1-.2.2-.4.2h-.2a6.7 6.7 0 01-3.1-2.6c-.1-.2-.1-.3 0-.5l.4-.5c.1-.2.2-.3.2-.5s-.2-1-.4-1.4c-.2-.4-.4-.4-.6-.4h-.5c-.2 0-.5.1-.7.3-.7.7-1 1.6-1 2.5 0 2 1.7 3.9 2 4.2.3.3 2 1.9 4 2 .9 0 1.7-.3 2.4-1 .2-.2.3-.5.3-.7v-.4c0-.2 0-.3-.2-.5z"
                />
              </svg>
            </a>

            <!-- Facebook -->
            <a
              href="https://www.facebook.com/rededecatadorescearaoficial"
              target="_blank"
              rel="noopener"
              aria-label="Facebook"
              title="Abrir Facebook"
              class="group relative inline-flex w-10 h-10 rounded-full border border-white/30 items-center justify-center cursor-pointer transition-all duration-150 ease-out hover:-translate-y-0.5 hover:bg-white/10 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white/70 focus-visible:ring-offset-2 focus-visible:ring-offset-green-700 active:scale-95"
            >
              <span
                class="pointer-events-none absolute inset-0 rounded-full opacity-0 group-active:opacity-30 group-active:animate-ping bg-white/40"
              ></span>
              <svg
                viewBox="0 0 24 24"
                class="w-5 h-5 transition-transform group-hover:scale-110"
                fill="currentColor"
                aria-hidden="true"
              >
                <path
                  d="M22 12a10 10 0 10-11.5 9.9v-7h-2v-3h2v-2.3c0-2 1.2-3.1 3-3.1.9 0 1.8.1 1.8.1v2h-1c-1 0-1.3.6-1.3 1.2V12h2.2l-.3 3h-1.9v7A10 10 0 0022 12z"
                />
              </svg>
            </a>
          </div>
        </div>
      </div>

      <p class="text-center mt-6 text-xs opacity-80">
        © 2025 Rede de Catadores. Feito com ♻ e respeito ao meio ambiente.
      </p>
    </footer>

    <!-- MODAL AFILIADOS -->
    <div
      id="modalAfiliados"
      class="hidden fixed inset-0 bg-black/60 z-50 p-4 overflow-y-auto"
    >
      <div
        class="max-w-5xl mx-auto bg-white rounded-2xl shadow-xl border border-neutral-200 p-6 relative"
      >
        <div class="flex items-start justify-between gap-4">
          <h3 class="text-xl font-bold text-green-800">Afiliados da Rede</h3>
          <button
            id="btnFecharAfiliados"
            class="rounded-full w-9 h-9 grid place-items-center border hover:bg-neutral-50"
          >
            ✖
          </button>
        </div>

        <div class="mt-4">
          <div class="flex flex-wrap gap-2 mb-4">
            <button
              data-tab="tab-associacoes"
              class="tab-btn px-3 py-1.5 rounded-full border bg-green-600 text-white"
            >
              Associações (Fortaleza)
            </button>
            <button
              data-tab="tab-grupos"
              class="tab-btn px-3 py-1.5 rounded-full border bg-white"
            >
              Grupos
            </button>
            <button
              data-tab="tab-municipios"
              class="tab-btn px-3 py-1.5 rounded-full border bg-white"
            >
              Municípios Filiados
            </button>
          </div>

          <!-- Associações -->
          <div id="tab-associacoes" class="tab-pane grid md:grid-cols-2 gap-3">
            <div class="rounded-xl border p-3">
              <div class="font-semibold">Rede de Catadores</div>
              <div class="text-sm text-gray-600">
                09.000.185/0001-09 — João XXIII
              </div>
            </div>
            <div class="rounded-xl border p-3">
              <div class="font-semibold">
                ACORES (Associação Ecológica dos Coletores de Materiais
                Recicláveis da Serrinha e Adjacências)
              </div>
              <div class="text-sm text-gray-600">
                04.989.221/0001-95 — Serrinha
              </div>
            </div>
            <div class="rounded-xl border p-3">
              <div class="font-semibold">
                ARAN (Associação de Recicladores Amigos da Natureza)
              </div>
              <div class="text-sm text-gray-600">
                07.475.187/0001-29 — Bonsucesso
              </div>
            </div>
            <div class="rounded-xl border p-3">
              <div class="font-semibold">
                ASCAJAN (Associação dos Catadores do Jangurussu)
              </div>
              <div class="text-sm text-gray-600">
                08.612.882/0001-58 — Jangurussu
              </div>
            </div>
            <div class="rounded-xl border p-3">
              <div class="font-semibold">Moura Brasil</div>
              <div class="text-sm text-gray-600">
                24.293.438/0001-73 — Moura Brasil
              </div>
            </div>
            <div class="rounded-xl border p-3">
              <div class="font-semibold">Maravilha</div>
              <div class="text-sm text-gray-600">
                11.058.865/0001-25 — Vila União
              </div>
            </div>
            <div class="rounded-xl border p-3">
              <div class="font-semibold">Raio de Sol</div>
              <div class="text-sm text-gray-600">
                23.668.402/0001-64 — Genibaú
              </div>
            </div>
            <div class="rounded-xl border p-3">
              <div class="font-semibold">Rosa Virgínia</div>
              <div class="text-sm text-gray-600">
                09.635.604/0001-89 — Santa Terezinha
              </div>
            </div>
            <div class="rounded-xl border p-3">
              <div class="font-semibold">
                SOCRELP (Sociedade Comunitária de Reciclagem de Lixo do Pirambu)
              </div>
              <div class="text-sm text-gray-600">
                00.118.784/0001-57 — Pirambu
              </div>
            </div>
            <div class="rounded-xl border p-3">
              <div class="font-semibold">Viva a Vida</div>
              <div class="text-sm text-gray-600">
                07.865.301/0001-27 — Farias Brito
              </div>
            </div>
          </div>

          <!-- Grupos -->
          <div id="tab-grupos" class="tab-pane hidden">
            <div class="grid md:grid-cols-2 gap-3">
              <div class="rounded-xl border p-3">
                <div class="font-semibold">ASCABOMJA</div>
                <div class="text-sm text-gray-600">14 integrantes</div>
              </div>
              <div class="rounded-xl border p-3">
                <div class="font-semibold">ASCAROSA</div>
                <div class="text-sm text-gray-600">08 integrantes</div>
              </div>
              <div class="rounded-xl border p-3">
                <div class="font-semibold">CATAVIP</div>
                <div class="text-sm text-gray-600">33 integrantes</div>
              </div>
              <div class="rounded-xl border p-3">
                <div class="font-semibold">JOSÉ DE ALENCAR</div>
                <div class="text-sm text-gray-600">37 integrantes</div>
              </div>
              <div class="rounded-xl border p-3">
                <div class="font-semibold">LAGOA REDONDA</div>
                <div class="text-sm text-gray-600">12 integrantes</div>
              </div>
              <div class="rounded-xl border p-3">
                <div class="font-semibold">MACHADO DE ASSIS</div>
                <div class="text-sm text-gray-600">04 integrantes</div>
              </div>
              <div class="rounded-xl border p-3">
                <div class="font-semibold">MULHERES LUTA EM CENA</div>
                <div class="text-sm text-gray-600">50 integrantes</div>
              </div>
              <div class="rounded-xl border p-3">
                <div class="font-semibold">PALMARES</div>
                <div class="text-sm text-gray-600">22 integrantes</div>
              </div>
              <div class="rounded-xl border p-3">
                <div class="font-semibold">VIVA A VIDA</div>
                <div class="text-sm text-gray-600">05 integrantes</div>
              </div>
            </div>
          </div>

          <!-- Municípios -->
          <div id="tab-municipios" class="tab-pane hidden">
            <div class="grid sm:grid-cols-2 md:grid-cols-3 gap-3">
              <div class="rounded-xl border p-3">
                <div class="font-semibold">Metropolitano</div>
                <div class="text-sm text-gray-600">08 grupos/associações</div>
              </div>
              <div class="rounded-xl border p-3">
                <div class="font-semibold">Amontada</div>
                <div class="text-sm text-gray-600">22 grupos/associações</div>
              </div>
              <div class="rounded-xl border p-3">
                <div class="font-semibold">Aracoiaba</div>
                <div class="text-sm text-gray-600">17 grupos/associações</div>
              </div>
              <div class="rounded-xl border p-3">
                <div class="font-semibold">Aratuba</div>
                <div class="text-sm text-gray-600">01 grupos/associações</div>
              </div>
              <div class="rounded-xl border p-3">
                <div class="font-semibold">Barreira</div>
                <div class="text-sm text-gray-600">05 grupos/associações</div>
              </div>
              <div class="rounded-xl border p-3">
                <div class="font-semibold">Baturité</div>
                <div class="text-sm text-gray-600">18 grupos/associações</div>
              </div>
              <div class="rounded-xl border p-3">
                <div class="font-semibold">Boa Viagem</div>
                <div class="text-sm text-gray-600">38 grupos/associações</div>
              </div>
              <div class="rounded-xl border p-3">
                <div class="font-semibold">Chorozinho</div>
                <div class="text-sm text-gray-600">12 grupos/associações</div>
              </div>
              <div class="rounded-xl border p-3">
                <div class="font-semibold">Granja</div>
                <div class="text-sm text-gray-600">06 grupos/associações</div>
              </div>
              <div class="rounded-xl border p-3">
                <div class="font-semibold">Guaramiranga</div>
                <div class="text-sm text-gray-600">02 grupos/associações</div>
              </div>
              <div class="rounded-xl border p-3">
                <div class="font-semibold">Icó</div>
                <div class="text-sm text-gray-600">27 grupos/associações</div>
              </div>
              <div class="rounded-xl border p-3">
                <div class="font-semibold">Itapipoca</div>
                <div class="text-sm text-gray-600">14 grupos/associações</div>
              </div>
              <div class="rounded-xl border p-3">
                <div class="font-semibold">Itapiúna</div>
                <div class="text-sm text-gray-600">02 grupos/associações</div>
              </div>
              <div class="rounded-xl border p-3">
                <div class="font-semibold">Miraíma</div>
                <div class="text-sm text-gray-600">17 grupos/associações</div>
              </div>
              <div class="rounded-xl border p-3">
                <div class="font-semibold">Ocara</div>
                <div class="text-sm text-gray-600">18 grupos/associações</div>
              </div>
              <div class="rounded-xl border p-3">
                <div class="font-semibold">Pacatuba</div>
                <div class="text-sm text-gray-600">30 grupos/associações</div>
              </div>
              <div class="rounded-xl border p-3">
                <div class="font-semibold">Paracuru</div>
                <div class="text-sm text-gray-600">12 grupos/associações</div>
              </div>
              <div class="rounded-xl border p-3">
                <div class="font-semibold">Quixelô</div>
                <div class="text-sm text-gray-600">19 grupos/associações</div>
              </div>
              <div class="rounded-xl border p-3">
                <div class="font-semibold">Redenção</div>
                <div class="text-sm text-gray-600">19 grupos/associações</div>
              </div>
              <div class="rounded-xl border p-3">
                <div class="font-semibold">Tururu</div>
                <div class="text-sm text-gray-600">13 grupos/associações</div>
              </div>
              <div class="rounded-xl border p-3">
                <div class="font-semibold">Ubajara</div>
                <div class="text-sm text-gray-600">03 grupos/associações</div>
              </div>
            </div>
          </div>
        </div>

        <p class="mt-6 text-xs text-neutral-500">
          <span class="font-semibold">Fontes:</span> documento interno/2024 e
          notas da Rede (em atualização).
        </p>
      </div>
    </div>

    <!-- MODAL: Detalhe da Associação -->
    <div
      id="assocDetail"
      class="hidden fixed inset-0 bg-black/40 z-[60] flex items-center justify-center p-4"
    >
      <div
        class="bg-white max-w-lg w-full rounded-2xl shadow-xl border p-6 relative"
      >
        <button
          id="closeAssocDetail"
          class="absolute top-3 right-3 rounded-full w-9 h-9 grid place-items-center border hover:bg-neutral-50"
        >
          ✖
        </button>
        <h4
          id="assocTitle"
          class="text-xl font-extrabold text-green-800 mb-3"
        ></h4>
        <dl class="grid grid-cols-1 sm:grid-cols-2 gap-y-3 gap-x-6">
          <div>
            <dt class="text-xs uppercase tracking-wide text-neutral-500">
              Líder
            </dt>
            <dd id="assocLeader" class="font-semibold">—</dd>
          </div>
          <div>
            <dt class="text-xs uppercase tracking-wide text-neutral-500">
              Telefone
            </dt>
            <dd id="assocPhone" class="font-semibold">—</dd>
          </div>
          <div class="sm:col-span-2">
            <dt class="text-xs uppercase tracking-wide text-neutral-500">
              Endereço / Bairro
            </dt>
            <dd id="assocAddress" class="font-semibold">—</dd>
          </div>
          <div class="sm:col-span-2">
            <dt class="text-xs uppercase tracking-wide text-neutral-500">
              CNPJ
            </dt>
            <dd id="assocCNPJ" class="font-semibold">—</dd>
          </div>
        </dl>
      </div>
    </div>

    <!-- SCRIPTS -->
    <script>
        // =============== Normalização ===============
        const normKey = (s) =>
          String(s || "")
            .normalize('NFD').replace(/[\u0300-\u036f]/g, '')
            .toUpperCase()
            .replace(/\(.*?\)/g, '')
            .replace(/\s+/g, ' ')
            .trim();

        // ====================== DADOS ======================

        const ENDERECOS = {};
      const ASSOC_DETAILS = {}


        // ====================== LOGIN ======================
        const API_URL = window.location.hostname === "127.0.0.1" || window.location.hostname === "localhost"
        ? "http://127.0.0.1:8000/" // Local
        : "https://projeto-gerenciamento-redes-catadores.onrender.com";
        const BRASIL_API_URL = "https://brasilapi.com.br/api/cnpj/v1";
        const modalLogin = document.getElementById('modalLogin');
        const btnLogin = document.getElementById('btnLogin');
        const closeLogin = document.getElementById('closeLogin');
        const loginBtnAction = modalLogin?.querySelector("button.bg-green-700");
        const inputUser = modalLogin?.querySelector("input[type='text']");
        const inputPass = modalLogin?.querySelector("input[type='password']");

        

        btnLogin?.addEventListener('click', () => { modalLogin.classList.remove('hidden'); inputUser?.focus(); });
        closeLogin?.addEventListener('click', () => modalLogin.classList.add('hidden'));
        modalLogin?.addEventListener('click', (e) => { if (e.target === modalLogin) modalLogin.classList.add('hidden'); });

        loginBtnAction?.addEventListener('click', async (e) => {
          e.preventDefault();
          const username = (inputUser?.value || "").trim();
          const password = (inputPass?.value || "");
          if (!username || !password) { alert("Por favor, preencha o usuário e a senha"); return; }
          const originalText = loginBtnAction.innerText;
          loginBtnAction.innerText = "Entrando..."; loginBtnAction.disabled = true;
          try {
            const formData = new URLSearchParams(); formData.append('username', username); formData.append('password', password);
            const resp = await fetch(`${API_URL}/token`, { method:'POST', headers:{'Content-Type':'application/x-www-form-urlencoded'}, body: formData });
            if (!resp.ok) throw new Error("Usuário ou senha incorretos!");
            const data = await resp.json(); localStorage.setItem("rc_token", data.access_token); window.location.href = "app.html";
          } catch (err) { alert(err.message); } finally { loginBtnAction.innerText = originalText; loginBtnAction.disabled = false; }
        });
        inputPass?.addEventListener("keypress", (e) => { if (e.key === "Enter") { e.preventDefault(); loginBtnAction?.click(); } });

        // ====================== MODAL AFILIADOS + TABS ======================
        const modalAfiliados = document.getElementById('modalAfiliados');
        const btnAfiliados = document.getElementById('btnAfiliados');
        const btnVerAfiliados = document.getElementById('btnVerAfiliados');
        const btnFecharAfiliados = document.getElementById('btnFecharAfiliados');
        function openAfiliados(){ modalAfiliados.classList.remove('hidden'); }
        function closeAfiliados(){ modalAfiliados.classList.add('hidden'); }
        [btnAfiliados, btnVerAfiliados].forEach(b => b && b.addEventListener('click', openAfiliados));
        btnFecharAfiliados?.addEventListener('click', closeAfiliados);
        modalAfiliados?.addEventListener('click', (e) => { if (e.target === modalAfiliados) closeAfiliados(); });

        const tabBtns = document.querySelectorAll('.tab-btn');
        const panes = document.querySelectorAll('.tab-pane');
        tabBtns.forEach(btn => {
          btn.addEventListener('click', () => {
            const id = btn.getAttribute('data-tab');
            tabBtns.forEach(b => {
              b.classList.toggle('bg-green-600', b === btn);
              b.classList.toggle('text-white', b === btn);
              b.classList.toggle('bg-white', b !== btn);
            });
            panes.forEach(p => p.classList.toggle('hidden', p.id !== id));
          });
        });


      async function buscarEnderecoPorCNPJ(cnpj) {
        // Limpa o CNPJ (deixa só números)
        const cnpjLimpo = String(cnpj).replace(/\D/g, '');
        
        if (!cnpjLimpo || cnpjLimpo.length !== 14) return null;

        try {
            const res = await fetch(`${BRASIL_API_URL}/${cnpjLimpo}`);
            if (!res.ok) return null;
            
            const data = await res.json();
            
            // Formata o endereço bonito
            // Ex: Rua Flores, 123 — Centro, Fortaleza/CE
            return `${data.logradouro}, ${data.numero}${data.complemento ? ' ('+data.complemento+')' : ''} — ${data.bairro}, ${data.municipio}/${data.uf}`;
        } catch (error) {
            console.warn(`Não foi possível buscar endereço para CNPJ ${cnpj}`, error);
            return null;
        }
      }
async function fetchAssociacoesPublicas() {
      try {
          // Passo A: Busca a lista básica do seu Backend
          const response = await fetch(`${API_URL}/associacoes/?limit=100`);
          
          if (!response.ok) {
              console.warn("API de associações indisponível.");
              return;
          }

          const data = await response.json();
          const lista = data.items || [];

          // Passo B: Processa cada associação
          // Usamos Promise.all para buscar os endereços em paralelo (mais rápido)
          await Promise.all(lista.map(async (assoc) => {
              const nomeReal = assoc.parceiro_info?.nome || "Associação Sem Nome";
              const key = normKey(nomeReal);
              const cnpj = assoc.cnpj;

              // Define os dados iniciais (Endereço começa como "Carregando...")
              ASSOC_DETAILS[key] = {
                  nome: nomeReal,
                  lider: assoc.lider || "—",
                  telefone: assoc.telefone || "—",
                  cnpj: cnpj || "—",
                  endereco: "Buscando endereço..." 
              };

              // Se tiver CNPJ, busca o endereço na BrasilAPI
              if (cnpj && cnpj.length > 5) {
                  const enderecoReal = await buscarEnderecoPorCNPJ(cnpj);
                  if (enderecoReal) {
                      ASSOC_DETAILS[key].endereco = enderecoReal;
                  } else {
                      ASSOC_DETAILS[key].endereco = "Endereço não encontrado";
                  }
              } else {
                  ASSOC_DETAILS[key].endereco = "Endereço não disponível";
              }
          }));

          console.log("Dados de associações e endereços carregados:", Object.keys(ASSOC_DETAILS).length);

      } catch (error) {
          console.error("Erro ao conectar com a API:", error);
      }
    }
        document.addEventListener("DOMContentLoaded", fetchAssociacoesPublicas);
        // ====================== Detalhe da Associação ======================
        const assocDetail = document.getElementById('assocDetail');
        const assocTitleEl = document.getElementById('assocTitle');
        const assocLeaderEl = document.getElementById('assocLeader');
        const assocPhoneEl  = document.getElementById('assocPhone');
        const assocAddrEl   = document.getElementById('assocAddress');
        const assocCNPJEl   = document.getElementById('assocCNPJ');
        const closeAssocDetail = document.getElementById('closeAssocDetail');

        function openAssocDetailByName(rawName){
          const key = normKey(rawName);
          const d = ASSOC_DETAILS[key] || { nome: rawName.toUpperCase(), lider:"—", telefone:"—", endereco: ENDERECOS[key] || "—", cnpj:"—" };
          assocTitleEl.textContent = (rawName || d.nome).toUpperCase();
          assocLeaderEl.textContent = d.lider || "—";
          assocPhoneEl.textContent  = d.telefone || "—";
          assocAddrEl.textContent   = d.endereco || "—";
          assocCNPJEl.textContent   = d.cnpj || "—";
          assocDetail.classList.remove('hidden');
        }
        function closeAssoc(){ assocDetail.classList.add('hidden'); }
        closeAssocDetail?.addEventListener('click', closeAssoc);
        assocDetail?.addEventListener('click', (e) => { if (e.target === assocDetail) closeAssoc(); });
        document.addEventListener('keydown', (e) => { if (e.key === 'Escape' && !assocDetail.classList.contains('hidden')) closeAssoc(); });

        // ====== Função para dar "vida" aos cards ======
        function enhanceClickableCard(card, onActivate){
          card.classList.add(
            'clickable-card','cursor-pointer','transition',
            'hover:-translate-y-0.5','active:translate-y-0',
            'hover:border-green-200','hover:shadow-md','shadow-sm','bg-white',
            'focus-visible:ring-2','focus-visible:ring-green-600/50','ring-offset-2','ring-offset-white'
          );
          card.setAttribute('role','button');
          card.setAttribute('tabindex','0');

          const press = (x, y) => {
            card.style.setProperty('--x', x + 'px');
            card.style.setProperty('--y', y + 'px');
            card.classList.add('is-pressed');
            setTimeout(() => card.classList.remove('is-pressed'), 220);
          };

          card.addEventListener('mousedown', (e) => {
            const r = card.getBoundingClientRect();
            press(e.clientX - r.left, e.clientY - r.top);
          });
          card.addEventListener('click', () => onActivate && onActivate());

          // teclado: Enter ou Espaço ativam
          card.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' || e.key === ' ') {
              e.preventDefault();
              const r = card.getBoundingClientRect();
              press(r.width/2, r.height/2);
              onActivate && onActivate();
            }
          });
        }

        // Clique/efeito nos cards do modal (Associações)
        (function wireAfiliadosClick(){
          const paneAssoc = document.getElementById("tab-associacoes");
          if (!paneAssoc) return;
          const cards = paneAssoc.querySelectorAll(".rounded-xl.border.p-3, .rounded-xl.border.bg-white.p-3");
          cards.forEach(card => {
            const nameEl = card.querySelector(".font-semibold");
            if (!nameEl) return;
            enhanceClickableCard(card, () => {
              // garante aba ativa e abre detalhe
              tabBtns.forEach(b => {
                const isAssoc = b.getAttribute('data-tab') === 'tab-associacoes';
                b.classList.toggle('bg-green-600', isAssoc);
                b.classList.toggle('text-white', isAssoc);
                b.classList.toggle('bg-white', !isAssoc);
              });
              panes.forEach(p => p.classList.toggle('hidden', p.id !== 'tab-associacoes'));
              openAssocDetailByName(nameEl.textContent.trim());
            });
          });
        })();

        // Clique/efeito nos cards da seção “Nossa Rede”
        (function wireGridRede(){
          const grid = document.querySelector('#rede .grid.sm\\:grid-cols-2') || document.querySelector('#rede .grid');
          if (!grid) return;
          const tiles = grid.querySelectorAll(".rounded-xl.border.bg-white.p-4");
          tiles.forEach(tile => {
            const nameEl = tile.querySelector(".font-semibold");
            if (!nameEl) return;
            enhanceClickableCard(tile, () => {
              openAfiliados();
              setTimeout(() => openAssocDetailByName(nameEl.textContent.trim()), 80);
            });
          });
        })();

        // ====================== GRÁFICO ======================
        (function makeGraficoMensal(){
          const tabela = document.getElementById('tabelaProducao');
          const canvas = document.getElementById('graficoMensal');
          if (!tabela || !canvas || !window.Chart) return;

          const parsePtBR = (txt) => Number(String(txt).replace(/\./g, '').replace(',', '.'));
          const linhas = Array.from(tabela.querySelectorAll('tbody tr'))
            .filter(tr => (tr.querySelector('td')?.textContent || '').trim().toLowerCase() !== 'total');

          const meses = [], valores = [];
          linhas.forEach(tr => {
            const tds = tr.querySelectorAll('td');
            meses.push(tds[0].textContent.trim());
            valores.push(parsePtBR(tds[1].textContent.trim()));
          });

          new Chart(canvas, {
            type: 'bar',
            data: { labels: meses, datasets: [{ label: 'Kg por mês', data: valores, borderWidth: 1, borderRadius: 8, backgroundColor: 'rgba(16, 185, 129, 0.6)', borderColor: 'rgba(16, 185, 129, 1)' }] },
            options: {
              responsive: true,
              plugins: { legend: { display: false }, tooltip: { callbacks: { label: (ctx) => Intl.NumberFormat('pt-BR').format(ctx.parsed.y) + ' kg' } } },
              scales: {
                y: { beginAtZero: true, grid: { color: 'rgba(0,0,0,0.06)' }, ticks: { callback: (v) => Intl.NumberFormat('pt-BR').format(v) + ' kg' } },
                x: { grid: { display: false } }
              }
            }
          });
        })();
    </script>
  </body>
</html>
